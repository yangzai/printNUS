
<!DOCTYPE html> 
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1"> 
	<title>NUS Print Queue Viewer</title> 
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
	<link rel="stylesheet" href="justin.css" type = text/css" />
	<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
	<style type="text/css">
		#cs {
			margin: 23px 15px 0px 15px;}
	</style>
	
	
	<script type="text/javascript">
		
		var globalCLPrintQV = 0;
		var globalCLPrintingQV = 0;
		var globalCLPrintTimeV = 0;
		var globalYIHPrintQV = 0;
		var globalYIHPrintingQV = 0;
		var globalYIHPrintTimeV = 0;
		var globalCOM1L1PrintingQV = 0;
		var globalCOM1L1PrintTimeV = 0;
		
		
		jQuery(function($){ 			
			$.get( 'getCLPrintQ.php', function(CLPrintQV){ 
				$('#CLPrintQTag').html(CLPrintQV); 
				globalCLPrintQV = CLPrintQV;
			});
			
			$.get( 'getCLPrintData.php', function(CLPrintDataV){ 
				$('#CLPrintDataTag').html(CLPrintDataV); 
			}); 
			
			$.get( 'getCLPrintingQ.php', function(CLPrintingQV){ 
				$('#CLPrintingQTag').html(CLPrintingQV); 
				globalCLPrintingQV = CLPrintingQV;
			});
			
			$.get( 'getCLPrintingData.php', function(CLPrintingDataV){ 
				$('#CLPrintingDataTag').html(CLPrintingDataV); 
			}); 
			
			$.get( 'getCLPrintTime.php', function(CLPrintTimeV){ 
				$('#CLPrintTimeTag').html(CLPrintTimeV); 
			}); 
			
			$.get( 'getYIHPrintQ.php', function(YIHPrintQV){ 
				$('#YIHPrintQTag').html(YIHPrintQV); 
				globalYIHPrintQV = YIHPrintQV;
			});
			
			$.get( 'getYIHPrintData.php', function(YIHPrintDataV){ 
				$('#YIHPrintDataTag').html(YIHPrintDataV); 
			}); 
			
			$.get( 'getYIHPrintingQ.php', function(YIHPrintingQV){ 
				$('#YIHPrintingQTag').html(YIHPrintingQV); 
				globalYIHPrintingQV = YIHPrintingQV;
			});
			
			$.get( 'getYIHPrintingData.php', function(YIHPrintingDataV){ 
				$('#YIHPrintingDataTag').html(YIHPrintingDataV); 
			}); 
			
			$.get( 'getCOM1L1PrintingQ.php', function(COM1L1PrintingQV){ 
				$('#COM1L1PrintingQTag').html(COM1L1PrintingQV); 
				globalCOM1L1PrintingQV = COM1L1PrintingQV;
			});
			
			$.get( 'getCOM1L1PrintingData.php', function(COM1L1PrintingDataV){ 
				$('#COM1L1PrintingDataTag').html(COM1L1PrintingDataV); 
			}); 
		

			setInterval(function(){ 
				$.get( 'getCLPrintQ.php', function(CLPrintQV){ 
					$('#CLPrintQTag').html(CLPrintQV); 
					globalCLPrintQV = CLPrintQV;
				}); 
				$.get( 'getCLPrintData.php', {numOfRows: globalCLPrintQV}, function(CLPrintDataV){ 
					$('#CLPrintDataTag').html(CLPrintDataV); 
				}); 
				$.get( 'getCLPrintingQ.php', function(CLPrintingQV){ 
					$('#CLPrintingQTag').html(CLPrintingQV); 
					globalCLPrintingQV = CLPrintingQV;
				}); 
				$.get( 'getCLPrintingData.php', {numOfRows: globalCLPrintingQV}, function(CLPrintingDataV){ 
					$('#CLPrintingDataTag').html(CLPrintingDataV); 
				}); 
				// The tag is used to create a span of that id. For time, I'm not using the tag as of now
				$.get( 'getCLPrintTime.php', function(CLPrintTimeV){ 
					$('#CLPrintTimeTag').html(CLPrintTimeV);
					globalCLPrintTimeV = CLPrintTimeV;
				}); 
				$.get( 'getYIHPrintQ.php', function(YIHPrintQV){ 
					$('#YIHPrintQTag').html(YIHPrintQV); 
					globalYIHPrintQV = YIHPrintQV;
				}); 
				$.get( 'getYIHPrintData.php', {numOfRows: globalYIHPrintQV}, function(YIHPrintDataV){ 
					$('#YIHPrintDataTag').html(YIHPrintDataV); 
				}); 
				$.get( 'getYIHPrintingQ.php', function(YIHPrintingQV){ 
					$('#YIHPrintingQTag').html(YIHPrintingQV); 
					globalYIHPrintingQV = YIHPrintingQV;
				}); 
				$.get( 'getYIHPrintingData.php', {numOfRows: globalYIHPrintingQV}, function(YIHPrintingDataV){ 
					$('#YIHPrintingDataTag').html(YIHPrintingDataV); 
				}); 
				// The tag is used to create a span of that id. For time, I'm not using the tag as of now
				$.get( 'getYIHPrintTime.php', function(YIHPrintTimeV){ 
					$('#YIHPrintTimeTag').html(YIHPrintTimeV);
					globalYIHPrintTimeV = YIHPrintTimeV;
				}); 
				$.get( 'getCOM1L1PrintingQ.php', function(COM1L1PrintingQV){ 
					$('#COM1L1PrintingQTag').html(COM1L1PrintingQV); 
					globalCOM1L1PrintingQV = COM1L1PrintingQV;
				}); 
				$.get( 'getCOM1L1PrintingData.php', {numOfRows: globalCOM1L1PrintingQV}, function(COM1L1PrintingDataV){ 
					$('#COM1L1PrintingDataTag').html(COM1L1PrintingDataV); 
				}); 
				// The tag is used to create a span of that id. For time, I'm not using the tag as of now
				$.get( 'getCOM1L1PrintTime.php', function(COM1L1PrintTimeV){ 
					$('#COM1L1PrintTimeTag').html(COM1L1PrintTimeV);
					globalCOM1L1PrintTimeV = COM1L1PrintTimeV;
				}); 
							
				
			},10000); // 10000ms == 10 seconds 
		}); 

		var CLcounter=setInterval("CLtimer()", 1000);
		function CLtimer()
		{
			var timeMins, timeSeconds;
			if(globalCLPrintTimeV>60)
			{
				timeMins = globalCLPrintTime/60;
				timeSeconds = globalCLPrintTime%60;
				document.getElementById("CLtimerID").innerHTML=timeMins + " mins " + timeSeconds + " secs";
			}
			else
				document.getElementById("CLtimerID").innerHTML=globalCLPrintTimeV + " secs";
			
			globalCLPrintTimeV=globalCLPrintTimeV--;
			if(globalCLPrintTimeV < 0)
				globalCLPrintTimeV = 0;
		}	
		
		var YIHcounter=setInterval("YIHtimer()", 1000);
		function YIHtimer()
		{
			var timeMins, timeSeconds;
			if(globalYIHPrintTimeV>60)
			{
				timeMins = globalYIHPrintTime/60;
				timeSeconds = globalYIHPrintTime%60;
				document.getElementById("YIHtimerID").innerHTML=timeMins + " mins " + timeSeconds + " secs";
			}
			else
				document.getElementById("YIHtimerID").innerHTML=globalYIHPrintTimeV + " secs";
			
			globalYIHPrintTimeV=globalYIHPrintTimeV--;

			globalYIHPrintTimeV=globalYIHPrintTimeV-1;
			if(globalYIHPrintTimeV < 0)
				globalYIHPrintTimeV = 0;
		}
		
		var COM1L1counter=setInterval("COM1L1timer()", 1000);
		function COM1L1timer()
		{
			var timeMins, timeSeconds;
			if(globalCOM1L1PrintTimeV>60)
			{
				timeMins = globalCOM1L1PrintTime/60;
				timeSeconds = globalCOM1L1PrintTime%60;
				document.getElementById("COM1L1timerID").innerHTML=timeMins + " mins " + timeSeconds + " secs";
			}
			else
				document.getElementById("COM1L1timerID").innerHTML=globalCOM1L1PrintTimeV + " secs";
			
			globalCOM1L1PrintTimeV=globalCOM1L1PrintTimeV--;

			globalCOM1L1PrintTimeV=globalCOM1L1PrintTimeV-1;
			if(globalCOM1L1PrintTimeV < 0)
				globalCOM1L1PrintTimeV = 0;
		}
	</script>
	
	
</head> 

<body> 

<!-- Start of first page: #one -->
<div data-role="page" id="one" data-color="green">

	<div data-role="header" data-theme="c">
		<h1>Print Queue</h1>
	</div><!-- /header -->

	<div data-role="content">
		<div data-role="collapsible-set" id="cs">
			<div data-role="collapsible" data-iconpos="right" data-theme="b" id="YIHdiv">
				<h3>CBLC@YIH (4 printers)</h3>
				<span id="test"></span>
				<div data-role="collapsible" data-iconpos="right" data-mini=true data-theme="e" data-content-theme="e">
					<h4>
					<span id='YIHPrintQTag'>Retrieving...</span>&nbsp job(s) waiting now<br />
					</h4>
					<span id='YIHPrintDataTag'>Retrieving...</span>
					<br />
				</div>
				<div data-role="collapsible" data-iconpos="right" data-mini=true data-theme="e" data-content-theme="e">
					<h4>
					<span id='YIHPrintingQTag'>Retrieving...</span>&nbsp job(s) printing now<br />
					</h4>
					<span id='YIHPrintingDataTag'>Retrieving...</span>
					<br />
				</div>
				<h5>Est. printing time: <span id="YIHtimerID"></span> </h5> </p>

			</div>
			<div data-role="collapsible" data-iconpos="right" data-theme="b" id="CLdiv">
				<h3>Central Library (4 printers)</h3>
				
				<div data-role="collapsible" data-iconpos="right" data-mini=true data-theme="e" data-content-theme="e">
					<h4>
					<span id='CLPrintQTag'>Retrieving...</span>&nbsp job(s) waiting now<br />
					</h4>
					<span id='CLPrintDataTag'>Retrieving...</span>
					<br />
				</div>
				<div data-role="collapsible" data-iconpos="right" data-mini=true data-theme="e" data-content-theme="e">
					<h4>
					<span id='CLPrintingQTag'>Retrieving...</span>&nbsp job(s) printing now<br />
					</h4>
					<span id='CLPrintingDataTag'>Retrieving...</span>
					<br />
				</div>
				<h5>Est. printing time: <span id="CLtimerID"></span> </h5> </p>

			</div>
			<div data-role="collapsible" data-iconpos="right" data-theme="b" id="HSSMdiv">
				<h3>Hon Sui Sen Memorial Library</h3>
				<div data-role="collapsible" data-iconpos="right" data-mini=true data-theme="e" data-content-theme="e">
				<h4>0 job(s) printing now</h4>
				</div>
				<h5>Est. printing time: 0 secs</h5>
			</div>
			<div data-role="collapsible" data-iconpos="right" data-theme="b" id="Medicaldiv">
				<h3>Medical Library</h3>
				<div data-role="collapsible" data-iconpos="right" data-mini=true data-theme="e" data-content-theme="e">
				<h4>0 job(s) printing now</h4>
				</div>
				<h5>Est. printing time: 0 secs</h5>
			</div>
			<div data-role="collapsible" data-iconpos="right" data-theme="b" id="Musicdiv">
				<h3>Music Library</h3>
				<div data-role="collapsible" data-iconpos="right" data-mini=true data-theme="e" data-content-theme="e">
				<h4>0 job(s) printing now</h4>
				</div>
				<h5>Est. printing time: 0 secs</h5>
			</div>
			<div data-role="collapsible" data-iconpos="right" data-theme="b" id="Sciencediv">
				<h3>Science Library (4 printers)</h3>
				<div data-role="collapsible" data-iconpos="right" data-mini=true data-theme="e" data-content-theme="e">
				<h4>0 job(s) printing now</h4>
				</div>
				<h5>Est. printing time: 0 secs</h5>
			</div>
			<div data-role="collapsible" data-iconpos="right" data-theme="b" id="UTowndiv">
				<h3>University Town ERC</h3>
				<div data-role="collapsible" data-iconpos="right" data-mini=true data-theme="e" data-content-theme="e">
				<h4>0 job(s) printing now</h4>
				</div>
				<h5>Est. printing time: 0 secs</h5>
			</div>
			<div data-role="collapsible" data-iconpos="right" data-theme="b" id="SoCdiv">
				<h3>School of Computing Level 1(3 printers)</h3>
				<div data-role="collapsible" data-iconpos="right" data-mini=true data-theme="e" data-content-theme="e">
				<h4>0 job(s) printing now</h4>
				</div>
				<h5>Est. printing time: 0 secs</h5>
			</div>
		</div>
	</div>

	<div data-role="footer" data-theme="d" data-position="fixed">
		<div data-role="navbar">
			<ul>
				<li><a href="#one" data-icon="home">Print Queue</a></li>
				<li><a href="map.html" data-icon="grid" rel="external">Nearest Printer</a></li>
			</ul>
		</div><!-- /navbar -->
	</div><!-- /footer -->
</div><!-- /page one -->

</body>
</html>
